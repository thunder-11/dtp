<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="register.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"/>
    <title>Sign Up</title>
</head>
<body>
    <section>
      <span class="overlay" onclick="window.location.assign('login.html')"></span>

      <div class="modal-box">
        <i class="fa-regular fa-circle-check"></i>
        <h2 id="message"></h2>

        <div class="buttons">
          <button class="close-btn" onclick="window.location.assign('login.html')">Ok</button>
        </div>
      </div>
    </section>
    <div class="register">
        <div class="header"><h1>Sign Up</h1>
            <p>Create your account</p>
        </div>
        <form>
            <div class="form-group">
                <label for="username">Username</label>
                <input 
                    type="text" 
                    id="username" 
                    name="username"
                    placeholder="Enter username"
                    minlength="3"
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input 
                    type="email" 
                    id="email" 
                    name="email"
                    placeholder="Enter email"
                    required
                >
            </div>
            
            <div class="form-group">
                <label for="password">Password</label>
                <input 
                    type="password" 
                    id="password" 
                    name="password"
                    placeholder="Enter password"
                    minlength="8"
                    required
                >
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input 
                    type="password" 
                    id="confirmPassword" 
                    name="confirmPassword"
                    placeholder="Confirm password"
                    minlength="8"
                    required
                >
            </div>
            <button type="submit" id="submit" class="register-btn" class="show-modal" onclick="addData()">Create Account</button>
        </form>
        
        <div class="divider"><span>Already have an account?</span></div>
        <div class="login-link">
            <a onclick="window.location.assign('login.html')">Sign in</a>
        </div>
    </div>
</body>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyDrawO7KtgK6xe9zioTJ851ii_OmQwgL5E",
  authDomain: "eventms-3f505.firebaseapp.com",
  projectId: "eventms-3f505",
  storageBucket: "eventms-3f505.firebasestorage.app",
  messagingSenderId: "462891335836",
  appId: "1:462891335836:web:9d2638e06783b330a2ed59",
  measurementId: "G-V6MP0Q86JT"
};

firebase.initializeApp(firebaseConfig);
firebase.analytics();

const db = firebase.database();

document.addEventListener("DOMContentLoaded", () => {
  const section = document.querySelector("section");
  const message = document.getElementById("message");
  const username = document.getElementById("username")
  const email = document.getElementById("email");
  const password = document.getElementById("password");
  const confirmPassword = document.getElementById("confirmPassword");


  function addData(event) {
    event.preventDefault();
    const emailv = email.value.replace(/\./g, "_"); 
    if(password.value == confirmPassword.value){
    db.ref("users/" + emailv).set({
      username: username.value,
      email: email.value,
      password: password.value
    }).then(() => {
    message.innerHTML = 'Registered successfully';
    section.classList.add("active");
    }).catch((error) => {
      console.error("Error adding user:", error);
    });
    } else {
    alert("Password does not match.")
    }
    } 

const form = document.querySelector("form");
form.addEventListener("submit", addData);
});

</script>
</html>
